<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Key Journey - ç´éµæ—…ç¨‹</title>
  <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
      background: #0f172a;
      color: #f1f5f9;
      overflow-x: hidden;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100vh;
    }
    
    /* Welcome Screen */
    .welcome-screen {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(160deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    }
    
    .welcome-box {
      text-align: center;
      max-width: 400px;
      padding: 40px;
      background: rgba(30, 41, 59, 0.5);
      border-radius: 24px;
      border: 1px solid #334155;
    }
    
    .logo {
      font-size: 64px;
      margin-bottom: 16px;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    h1 { font-size: 36px; font-weight: 800; color: #fff; margin-bottom: 8px; }
    h2 { font-size: 28px; font-weight: 700; margin-bottom: 8px; }
    h3 { font-size: 20px; font-weight: 700; margin-bottom: 16px; }
    
    .subtitle { font-size: 18px; color: #6366f1; margin-bottom: 24px; }
    .description { font-size: 15px; color: #94a3b8; line-height: 1.6; margin-bottom: 32px; }
    
    input[type="text"], input[type="number"], textarea, select {
      width: 100%;
      padding: 14px 16px;
      border-radius: 12px;
      border: 1px solid #334155;
      background: #1e293b;
      color: #f1f5f9;
      font-size: 15px;
      outline: none;
      margin-bottom: 16px;
      font-family: inherit;
    }
    
    input:focus, textarea:focus, select:focus { border-color: #6366f1; }
    textarea { min-height: 100px; resize: vertical; }
    
    .btn {
      width: 100%;
      padding: 16px;
      border-radius: 14px;
      border: none;
      color: #fff;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.2s, opacity 0.2s;
    }
    
    .btn:hover:not(:disabled) { transform: translateY(-2px); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn-primary { background: linear-gradient(135deg, #6366f1, #8b5cf6); }
    .btn-success { background: linear-gradient(135deg, #10b981, #059669); }
    .btn-danger { background: linear-gradient(135deg, #ef4444, #dc2626); }
    .btn-secondary { background: #475569; }
    
    .hidden { display: none !important; }
    
    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      background: #0f172a;
      border-bottom: 1px solid #1e293b;
      position: sticky;
      top: 0;
      z-index: 100;
      margin: -20px -20px 20px -20px;
    }
    
    .back-btn {
      background: none;
      border: none;
      color: #6366f1;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      padding: 0;
    }
    
    .icon-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
    }
    
    /* Stats */
    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }
    
    .stat-box {
      background: #1e293b;
      padding: 20px;
      border-radius: 16px;
      border: 1px solid #334155;
      text-align: center;
    }
    
    .stat-icon { font-size: 32px; margin-bottom: 8px; }
    .stat-value { font-size: 28px; font-weight: 700; color: #fff; margin-bottom: 4px; }
    .stat-label { font-size: 13px; color: #94a3b8; }
    
    /* Cards */
    .card {
      background: #1e293b;
      padding: 16px;
      border-radius: 14px;
      border: 1px solid #334155;
      margin-bottom: 12px;
      cursor: pointer;
      transition: transform 0.2s, border-color 0.2s;
    }
    
    .card:hover {
      transform: translateY(-2px);
      border-color: #6366f1;
    }
    
    .card-title { font-size: 16px; font-weight: 600; color: #f1f5f9; margin-bottom: 8px; }
    .card-info { font-size: 14px; color: #94a3b8; }
    
    /* Badges */
    .badge {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      margin-top: 8px;
      margin-right: 8px;
    }
    
    .badge-learning { background: #fef3c7; color: #f59e0b; }
    .badge-completed { background: #d1fae5; color: #10b981; }
    .badge-mastered { background: #ede9fe; color: #8b5cf6; }
    .badge-custom { background: #dbeafe; color: #3b82f6; }
    
    /* Filter chips */
    .filter-chips {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding: 12px 0;
      margin-bottom: 16px;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    .filter-chips::-webkit-scrollbar { display: none; }
    
    .chip {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      white-space: nowrap;
      border: 1px solid #334155;
      background: #1e293b;
      color: #94a3b8;
      transition: all 0.2s;
    }
    
    .chip.active {
      background: #6366f1;
      color: #fff;
      border-color: #6366f1;
    }
    
    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 48px 24px;
      background: #1e293b;
      border-radius: 16px;
      border: 1px solid #334155;
    }
    
    .empty-icon { font-size: 48px; margin-bottom: 16px; }
    .empty-text { font-size: 16px; color: #cbd5e1; margin-bottom: 8px; }
    .empty-subtext { font-size: 14px; color: #64748b; }
    
    /* Toast */
    .toast {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #10b981, #059669);
      color: white;
      padding: 14px 24px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);
      z-index: 1000;
      font-weight: 600;
      font-size: 15px;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translate(-50%, -20px); }
      to { opacity: 1; transform: translate(-50%, 0); }
    }
    
    /* Button groups */
    .btn-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 32px;
    }
    
    .btn-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }
    
    /* Form label */
    .label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #cbd5e1;
      margin-bottom: 8px;
    }
    
    /* Log entry */
    .log-entry {
      background: #1e293b;
      padding: 16px;
      border-radius: 12px;
      border: 1px solid #334155;
      margin-bottom: 12px;
    }
    
    .log-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .log-date { font-size: 14px; font-weight: 600; color: #f1f5f9; }
    .log-duration { font-size: 13px; color: #94a3b8; }
    .log-notes { font-size: 14px; color: #cbd5e1; line-height: 1.6; }
    
    /* Info box */
    .info-box {
      background: #1e293b;
      border-radius: 12px;
      padding: 16px;
      border: 1px solid #334155;
      margin-bottom: 16px;
    }
    
    .info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #334155;
    }
    
    .info-row:last-child { border-bottom: none; }
    .info-label { font-size: 14px; color: #94a3b8; }
    .info-value { font-size: 14px; font-weight: 600; color: #f1f5f9; }
    
    /* Range slider */
    input[type="range"] {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      outline: none;
      -webkit-appearance: none;
      background: #334155;
      margin-bottom: 8px;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #6366f1;
      cursor: pointer;
    }
    
    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #6366f1;
      cursor: pointer;
      border: none;
    }
    
    .range-labels {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #64748b;
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <!-- Welcome Screen -->
  <div id="welcomeScreen" class="welcome-screen hidden">
    <div class="welcome-box">
      <div class="logo">ğŸ¹</div>
      <h1>Key Journey</h1>
      <p class="subtitle">ç´éµæ—…ç¨‹</p>
      <p class="description">è¨˜éŒ„ä½ çš„é‹¼ç´å­¸ç¿’æ—…ç¨‹<br>æ”¶è—æ¯ä¸€é¦–è®“ä½ é›£å¿˜çš„æ¨‚æ›²</p>
      <input type="text" id="nameInput" placeholder="è¼¸å…¥ä½ çš„åå­—" autofocus>
      <button class="btn btn-primary" id="startBtn" disabled>é–‹å§‹æ—…ç¨‹ âœ¨</button>
    </div>
  </div>

  <!-- Home Screen -->
  <div id="homeScreen" class="container hidden">
    <div class="header">
      <div>
        <h2 style="font-size: 24px;">Key Journey</h2>
        <p style="font-size: 14px; color: #94a3b8; margin-top: 4px;">å—¨ï¼Œ<span id="userName"></span> ğŸ‘‹</p>
      </div>
      <button class="icon-btn" onclick="showSettings()">âš™ï¸</button>
    </div>

    <div class="stats">
      <div class="stat-box">
        <div class="stat-icon">ğŸµ</div>
        <div class="stat-value" id="pieceCount">0</div>
        <div class="stat-label">æ”¶è—</div>
      </div>
      <div class="stat-box">
        <div class="stat-icon">â­</div>
        <div class="stat-value" id="masteredCount">0</div>
        <div class="stat-label">ç²¾é€š</div>
      </div>
      <div class="stat-box">
        <div class="stat-icon">â±ï¸</div>
        <div class="stat-value" id="totalHours">0</div>
        <div class="stat-label">æ™‚æ•¸</div>
      </div>
    </div>

    <div class="btn-group">
      <button class="btn btn-primary" onclick="showExplore()">ğŸ—ºï¸ å¾æ›²åº«æ¢ç´¢</button>
      <button class="btn btn-success" onclick="showAddCustom()">â• æ–°å¢è‡ªè¨‚æ›²ç›®</button>
    </div>

    <h3>æˆ‘çš„æ”¶è—</h3>
    <div id="piecesList"></div>
  </div>

  <!-- Explore Screen -->
  <div id="exploreScreen" class="container hidden">
    <div class="header">
      <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
      <h2 style="font-size: 20px;">æ›²åº«æ¢ç´¢</h2>
      <div style="width: 40px;"></div>
    </div>

    <input type="text" id="searchInput" placeholder="ğŸ” æœå°‹æ›²åæˆ–ä½œæ›²å®¶..." style="margin-bottom: 12px;">

    <div class="filter-chips" id="filterChips"></div>

    <p style="font-size: 13px; color: #64748b; margin-bottom: 16px;">
      æ‰¾åˆ° <span id="resultCount">0</span> é¦–æ›²ç›®
    </p>

    <div id="libraryList"></div>
  </div>

  <!-- Add Custom Screen -->
  <div id="addCustomScreen" class="container hidden">
    <div class="header">
      <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
      <h2 style="font-size: 20px;">æ–°å¢è‡ªè¨‚æ›²ç›®</h2>
      <div style="width: 40px;"></div>
    </div>

    <div class="info-box">
      <p style="font-size: 14px; color: #94a3b8; line-height: 1.6;">
        ğŸ“ æ›²åº«è£¡æ‰¾ä¸åˆ°çš„æ›²ç›®ï¼Ÿæ²’é—œä¿‚ï¼<br>
        ä½ å¯ä»¥è‡ªå·±å»ºç«‹ä¸¦åŠ å…¥æ”¶è—ã€‚
      </p>
    </div>

    <label class="label">æ›²ç›®åç¨± *</label>
    <input type="text" id="customName" placeholder="ä¾‹å¦‚ï¼šæµ·é “ ç¬¬60è™Ÿå¥é³´æ›²">

    <label class="label">ä½œæ›²å®¶</label>
    <input type="text" id="customComposer" placeholder="ä¾‹å¦‚ï¼šæµ·é “" value="å…¶ä»–">

    <label class="label">åˆ†é¡</label>
    <select id="customCategory"></select>

    <label class="label">é›£åº¦: <span id="difficultyValue">5</span> / 10</label>
    <input type="range" id="customDifficulty" min="1" max="10" value="5" 
      oninput="document.getElementById('difficultyValue').textContent = this.value">
    <div class="range-labels">
      <span>ç°¡å–®</span>
      <span>å›°é›£</span>
    </div>

    <button class="btn btn-success" onclick="addCustomPiece()">âœ… åŠ å…¥æ”¶è—</button>
  </div>

  <!-- Detail Screen -->
  <div id="detailScreen" class="container hidden">
    <div class="header">
      <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
      <h2 style="font-size: 20px;" id="detailTitle"></h2>
      <button class="icon-btn" onclick="deletePiece()" style="color: #ef4444;">ğŸ—‘ï¸</button>
    </div>

    <div class="info-box">
      <div class="info-row">
        <span class="info-label">ä½œæ›²å®¶</span>
        <span class="info-value" id="detailComposer"></span>
      </div>
      <div class="info-row">
        <span class="info-label">åˆ†é¡</span>
        <span class="info-value" id="detailCategory"></span>
      </div>
      <div class="info-row">
        <span class="info-label">é›£åº¦</span>
        <span class="info-value" id="detailDifficulty"></span>
      </div>
      <div class="info-row">
        <span class="info-label">åŠ å…¥æ—¥æœŸ</span>
        <span class="info-value" id="detailDate"></span>
      </div>
    </div>

    <h3>å­¸ç¿’ç‹€æ…‹</h3>
    <div class="btn-grid" style="margin-bottom: 32px;">
      <button class="btn" id="statusBtn0" onclick="updateStatus(0)" 
        style="background: #fef3c7; color: #f59e0b;">ğŸ“– å­¸ç¿’ä¸­</button>
      <button class="btn" id="statusBtn1" onclick="updateStatus(1)"
        style="background: #d1fae5; color: #10b981;">âœ“ å·²å®Œæˆ</button>
      <button class="btn" id="statusBtn2" onclick="updateStatus(2)"
        style="background: #ede9fe; color: #8b5cf6;">â­ å·²ç²¾é€š</button>
    </div>

    <h3>æ–°å¢ç·´ç¿’è¨˜éŒ„</h3>
    <label class="label">ç·´ç¿’æ™‚é•·ï¼ˆåˆ†é˜ï¼‰</label>
    <input type="number" id="logDuration" placeholder="ä¾‹å¦‚ï¼š30" min="1">

    <label class="label">ç·´ç¿’ç­†è¨˜ï¼ˆé¸å¡«ï¼‰</label>
    <textarea id="logNotes" placeholder="è¨˜éŒ„ä»Šå¤©çš„ç·´ç¿’é‡é»ã€éœ€è¦æ”¹é€²çš„åœ°æ–¹..."></textarea>

    <button class="btn btn-success" onclick="addLog()" style="margin-bottom: 32px;">âœ… å„²å­˜è¨˜éŒ„</button>

    <h3>ç·´ç¿’è¨˜éŒ„</h3>
    <div id="logsList"></div>
  </div>

  <!-- Settings Screen -->
  <div id="settingsScreen" class="container hidden">
    <div class="header">
      <button class="back-btn" onclick="showHome()">â† è¿”å›</button>
      <h2 style="font-size: 20px;">è¨­å®š</h2>
      <div style="width: 40px;"></div>
    </div>

    <h3>å€‹äººè³‡è¨Š</h3>
    <div class="info-box" style="margin-bottom: 32px;">
      <div class="info-row">
        <span class="info-label">ä½¿ç”¨è€…</span>
        <span class="info-value" id="settingsName"></span>
      </div>
      <div class="info-row">
        <span class="info-label">é–‹å§‹æ—¥æœŸ</span>
        <span class="info-value" id="settingsStartDate"></span>
      </div>
    </div>

    <h3>è³‡æ–™çµ±è¨ˆ</h3>
    <div class="info-box" style="margin-bottom: 32px;">
      <div class="info-row">
        <span class="info-label">æ”¶è—æ›²ç›®</span>
        <span class="info-value" id="settingsPieces"></span>
      </div>
      <div class="info-row">
        <span class="info-label">ç·´ç¿’è¨˜éŒ„</span>
        <span class="info-value" id="settingsLogs"></span>
      </div>
      <div class="info-row">
        <span class="info-label">ç¸½ç·´ç¿’æ™‚æ•¸</span>
        <span class="info-value" id="settingsHours"></span>
      </div>
    </div>

    <h3>è³‡æ–™ç®¡ç†</h3>
    <div class="btn-group">
      <button class="btn btn-success" onclick="exportExcel()">ğŸ“Š åŒ¯å‡º Excel æª”æ¡ˆ</button>
      <button class="btn btn-primary" onclick="exportJSON()">ğŸ“¥ åŒ¯å‡º JSON å‚™ä»½</button>
      <button class="btn btn-primary" onclick="document.getElementById('importFile').click()">ğŸ“¤ åŒ¯å…¥ JSON å‚™ä»½</button>
      <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importJSON(event)">
      <button class="btn btn-danger" onclick="clearData()">ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰è³‡æ–™</button>
    </div>
  </div>

  <script>
    // ============================================================
    // DATA & STATE
    // ============================================================
    
    const STORAGE_KEY = 'key-journey-complete';
    
    let state = {
      user: null,
      pieces: [],
      logs: [],
      currentPiece: null
    };
    
    // æ›²ç›®åº«è³‡æ–™ï¼ˆ250+ å®Œæ•´æ›²ç›® - åŸºæ–¼ PDF å¿…å­¸æ›²ç›®è¡¨ï¼‰
    const REPERTOIRE = [
      // I. ç·´ç¿’æ›²ï¼ˆ27é¦–ï¼‰
      {name:"å¾¹çˆ¾å°¼ é€Ÿåº¦ç·´ç¿’æ›² Op.299",composer:"å¾¹çˆ¾å°¼",category:"ç·´ç¿’æ›²",difficulty:5},
      {name:"å¾¹çˆ¾å°¼ æŒ‡å°–éˆå·§ç·´ç¿’æ›² Op.740",composer:"å¾¹çˆ¾å°¼",category:"ç·´ç¿’æ›²",difficulty:7},
      {name:"å…‹èŠæ›¼ç¬¬ åæ‰‹ä¹‹é“",composer:"å…‹èŠæ›¼ç¬¬",category:"ç·´ç¿’æ›²",difficulty:7},
      {name:"è«èŒ²å¯å¤«æ–¯åŸº åäº”é¦–æ¼”å¥ç·´ç¿’æ›² Op.72",composer:"è«èŒ²å¯å¤«æ–¯åŸº",category:"ç·´ç¿’æ›²",difficulty:8},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.10 No.1",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.10 No.2",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.10 No.3 é›¢åˆ¥",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:8},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.10 No.4",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:10},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.10 No.5 é»‘éµ",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:8},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.10 No.12 é©å‘½",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.25 No.1 è±ç´",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.25 No.6",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:8},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.25 No.11 å†¬é¢¨",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:10},
      {name:"è•­é‚¦ ç·´ç¿’æ›² Op.25 No.12 å¤§æ´‹",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"è•­é‚¦ ä¸‰é¦–æ–°ç·´ç¿’æ›²",composer:"è•­é‚¦",category:"ç·´ç¿’æ›²",difficulty:8},
      {name:"ææ–¯ç‰¹ è¶…æŠ€ç·´ç¿’æ›² No.4 é¦¬æ·å¸•",composer:"ææ–¯ç‰¹",category:"ç·´ç¿’æ›²",difficulty:10},
      {name:"ææ–¯ç‰¹ è¶…æŠ€ç·´ç¿’æ›² No.5 é¬¼ç«",composer:"ææ–¯ç‰¹",category:"ç·´ç¿’æ›²",difficulty:10},
      {name:"ææ–¯ç‰¹ å¸•æ ¼å°¼å°¼å¤§ç·´ç¿’æ›² No.3 é˜",composer:"ææ–¯ç‰¹",category:"ç·´ç¿’æ›²",difficulty:10},
      {name:"ææ–¯ç‰¹ å¸•æ ¼å°¼å°¼å¤§ç·´ç¿’æ›² No.6",composer:"ææ–¯ç‰¹",category:"ç·´ç¿’æ›²",difficulty:10},
      {name:"å¾·å¸ƒè¥¿ ç·´ç¿’æ›² ç‚ºäº”æŒ‡è€Œä½œ",composer:"å¾·å¸ƒè¥¿",category:"ç·´ç¿’æ›²",difficulty:8},
      {name:"å¾·å¸ƒè¥¿ ç·´ç¿’æ›² ç‚ºä¸‰åº¦è€Œä½œ",composer:"å¾·å¸ƒè¥¿",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"å²å…‹é‡Œäºè³“ ç·´ç¿’æ›² Op.8 No.2",composer:"å²å…‹é‡Œäºè³“",category:"ç·´ç¿’æ›²",difficulty:7},
      {name:"å²å…‹é‡Œäºè³“ ç·´ç¿’æ›² Op.8 No.12",composer:"å²å…‹é‡Œäºè³“",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"å²å…‹é‡Œäºè³“ ç·´ç¿’æ›² Op.42 No.5",composer:"å²å…‹é‡Œäºè³“",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« éŸ³ç•«ç·´ç¿’æ›² Op.33 No.2",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« éŸ³ç•«ç·´ç¿’æ›² Op.33 No.8",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç·´ç¿’æ›²",difficulty:9},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« éŸ³ç•«ç·´ç¿’æ›² Op.39 No.5",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç·´ç¿’æ›²",difficulty:10},
      
      // II. å·´æ´›å…‹æ™‚æœŸï¼ˆ23é¦–ï¼‰
      {name:"å·´èµ« å¹³å‡å¾‹ç¬¬ä¸€å†Š Cå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:6},
      {name:"å·´èµ« å¹³å‡å¾‹ç¬¬ä¸€å†Š Cå°èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å·´èµ« å¹³å‡å¾‹ç¬¬ä¸€å†Š C#å¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:8},
      {name:"å·´èµ« å¹³å‡å¾‹ç¬¬äºŒå†Š Cå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å·´èµ« äºŒè²éƒ¨å‰µæ„æ›² No.1 Cå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:4},
      {name:"å·´èµ« äºŒè²éƒ¨å‰µæ„æ›² No.4 Då°èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:5},
      {name:"å·´èµ« äºŒè²éƒ¨å‰µæ„æ›² No.8 Få¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:5},
      {name:"å·´èµ« äºŒè²éƒ¨å‰µæ„æ›² No.13 Aå°èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:6},
      {name:"å·´èµ« ä¸‰è²éƒ¨å‰µæ„æ›² No.1 Cå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:6},
      {name:"å·´èµ« ä¸‰è²éƒ¨å‰µæ„æ›² No.6 Eå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å·´èµ« å¸•æå¡” No.1 Bbå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:9},
      {name:"å·´èµ« å¸•æå¡” No.2 Cå°èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:9},
      {name:"å·´èµ« æ³•åœ‹çµ„æ›² No.2 Cå°èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å·´èµ« æ³•åœ‹çµ„æ›² No.5 Gå¤§èª¿",composer:"å·´èµ«",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å²å¡æ‹‰ç¬¬ å¥é³´æ›² K.1 Då°èª¿",composer:"å²å¡æ‹‰ç¬¬",category:"å·´æ´›å…‹",difficulty:5},
      {name:"å²å¡æ‹‰ç¬¬ å¥é³´æ›² K.27 Bå°èª¿",composer:"å²å¡æ‹‰ç¬¬",category:"å·´æ´›å…‹",difficulty:6},
      {name:"å²å¡æ‹‰ç¬¬ å¥é³´æ›² K.87 Bå°èª¿",composer:"å²å¡æ‹‰ç¬¬",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å²å¡æ‹‰ç¬¬ å¥é³´æ›² K.141 Då°èª¿",composer:"å²å¡æ‹‰ç¬¬",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å²å¡æ‹‰ç¬¬ å¥é³´æ›² K.380 Eå¤§èª¿",composer:"å²å¡æ‹‰ç¬¬",category:"å·´æ´›å…‹",difficulty:7},
      {name:"å²å¡æ‹‰ç¬¬ å¥é³´æ›² K.492 Då¤§èª¿",composer:"å²å¡æ‹‰ç¬¬",category:"å·´æ´›å…‹",difficulty:8},
      {name:"éŸ“å¾·çˆ¾ çµ„æ›² HWV 428 å’Œè«§çš„éµåŒ ",composer:"éŸ“å¾·çˆ¾",category:"å·´æ´›å…‹",difficulty:6},
      {name:"æ‹‰æ‘© åŠ æ²ƒç‰¹èˆæ›²èˆ‡è®Šå¥",composer:"æ‹‰æ‘©",category:"å·´æ´›å…‹",difficulty:7},
      {name:"æ‹‰æ‘© ç¨çœ¼å·¨äºº",composer:"æ‹‰æ‘©",category:"å·´æ´›å…‹",difficulty:8},
      
      // III. å¤å…¸æ™‚æœŸï¼ˆ19é¦–ï¼‰
      {name:"æµ·é “ å¥é³´æ›² Hob.XVI/34 Eå°èª¿",composer:"æµ·é “",category:"å¤å…¸",difficulty:6},
      {name:"æµ·é “ å¥é³´æ›² Hob.XVI/49 Ebå¤§èª¿",composer:"æµ·é “",category:"å¤å…¸",difficulty:7},
      {name:"æµ·é “ å¥é³´æ›² Hob.XVI/50 Cå¤§èª¿",composer:"æµ·é “",category:"å¤å…¸",difficulty:8},
      {name:"æµ·é “ å¥é³´æ›² Hob.XVI/52 Ebå¤§èª¿",composer:"æµ·é “",category:"å¤å…¸",difficulty:8},
      {name:"è«æœ­ç‰¹ å¥é³´æ›² K.310 Aå°èª¿",composer:"è«æœ­ç‰¹",category:"å¤å…¸",difficulty:7},
      {name:"è«æœ­ç‰¹ å¥é³´æ›² K.330 Cå¤§èª¿",composer:"è«æœ­ç‰¹",category:"å¤å…¸",difficulty:6},
      {name:"è«æœ­ç‰¹ å¥é³´æ›² K.331 Aå¤§èª¿ åœŸè€³å…¶é€²è¡Œæ›²",composer:"è«æœ­ç‰¹",category:"å¤å…¸",difficulty:6},
      {name:"è«æœ­ç‰¹ å¥é³´æ›² K.332 Få¤§èª¿",composer:"è«æœ­ç‰¹",category:"å¤å…¸",difficulty:7},
      {name:"è«æœ­ç‰¹ å¥é³´æ›² K.545 Cå¤§èª¿",composer:"è«æœ­ç‰¹",category:"å¤å…¸",difficulty:5},
      {name:"è«æœ­ç‰¹ å°æ˜Ÿæ˜Ÿè®Šå¥æ›² K.265",composer:"è«æœ­ç‰¹",category:"å¤å…¸",difficulty:5},
      {name:"è²å¤šèŠ¬ å¥é³´æ›² Op.13 æ‚²æ„´",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:7},
      {name:"è²å¤šèŠ¬ å¥é³´æ›² Op.27 No.2 æœˆå…‰",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:7},
      {name:"è²å¤šèŠ¬ å¥é³´æ›² Op.57 ç†±æƒ…",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:10},
      {name:"è²å¤šèŠ¬ å¥é³´æ›² Op.10 No.1 Cå°èª¿",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:6},
      {name:"è²å¤šèŠ¬ å¥é³´æ›² Op.14 No.2 Gå¤§èª¿",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:6},
      {name:"è²å¤šèŠ¬ å¥é³´æ›² Op.31 No.2 æš´é¢¨é›¨",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:8},
      {name:"è²å¤šèŠ¬ çµ¦æ„›éº—çµ² WoO 59",composer:"è²å¤šèŠ¬",category:"å¤å…¸",difficulty:5},
      {name:"å…‹èŠæ›¼ç¬¬ å¥é³´æ›² Op.36 No.1",composer:"å…‹èŠæ›¼ç¬¬",category:"å¤å…¸",difficulty:5},
      {name:"å…‹èŠæ›¼ç¬¬ å¥é³´æ›² Op.36 No.3",composer:"å…‹èŠæ›¼ç¬¬",category:"å¤å…¸",difficulty:6},
      
      // IV. æµªæ¼«æ™‚æœŸï¼ˆ64é¦–ï¼‰
      {name:"å­Ÿå¾·çˆ¾é Œ ç„¡è¨€æ­Œ Op.19 No.1 ç”œèœœçš„å›æ†¶",composer:"å­Ÿå¾·çˆ¾é Œ",category:"æµªæ¼«",difficulty:5},
      {name:"å­Ÿå¾·çˆ¾é Œ ç„¡è¨€æ­Œ Op.30 No.6 å¨å°¼æ–¯èˆ¹æ­Œ",composer:"å­Ÿå¾·çˆ¾é Œ",category:"æµªæ¼«",difficulty:6},
      {name:"å­Ÿå¾·çˆ¾é Œ ç„¡è¨€æ­Œ Op.67 No.2 å¤±å»çš„å¹¸ç¦",composer:"å­Ÿå¾·çˆ¾é Œ",category:"æµªæ¼«",difficulty:6},
      {name:"å­Ÿå¾·çˆ¾é Œ éš¨æƒ³è¿´æ—‹æ›² Op.14",composer:"å­Ÿå¾·çˆ¾é Œ",category:"æµªæ¼«",difficulty:7},
      {name:"å­Ÿå¾·çˆ¾é Œ åš´è‚…è®Šå¥æ›² Op.54",composer:"å­Ÿå¾·çˆ¾é Œ",category:"æµªæ¼«",difficulty:8},
      {name:"è•­é‚¦ å¤œæ›² Op.9 No.1 Bbå°èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ å¤œæ›² Op.9 No.2 Ebå¤§èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ å¤œæ›² Op.15 No.1 Få¤§èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ å¤œæ›² Op.15 No.2 F#å¤§èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:7},
      {name:"è•­é‚¦ å¤œæ›² Op.27 No.1 C#å°èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:7},
      {name:"è•­é‚¦ å¤œæ›² Op.27 No.2 Dbå¤§èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:8},
      {name:"è•­é‚¦ å¤œæ›² Op.48 No.1 Cå°èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:8},
      {name:"è•­é‚¦ åœ“èˆæ›² Op.64 No.1 å°ç‹—",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:7},
      {name:"è•­é‚¦ åœ“èˆæ›² Op.64 No.2 C#å°èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ åœ“èˆæ›² Op.69 No.1 å‘Šåˆ¥",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ åœ“èˆæ›² Op.69 No.2 Bå°èª¿",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ æ³¢è˜­èˆæ›² Op.40 No.1 è»éšŠ",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:8},
      {name:"è•­é‚¦ æ³¢è˜­èˆæ›² Op.53 è‹±é›„",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ é¦¬ç¥–å¡ Op.7 No.1",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ é¦¬ç¥–å¡ Op.17 No.4",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:7},
      {name:"è•­é‚¦ é¦¬ç¥–å¡ Op.24 No.2",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:6},
      {name:"è•­é‚¦ æ•˜äº‹æ›² No.1 Gå°èª¿ Op.23",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ æ•˜äº‹æ›² No.2 Få¤§èª¿ Op.38",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ æ•˜äº‹æ›² No.3 Abå¤§èª¿ Op.47",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ æ•˜äº‹æ›² No.4 Få°èª¿ Op.52",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:10},
      {name:"è•­é‚¦ è©¼è«§æ›² No.1 Bå°èª¿ Op.20",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ è©¼è«§æ›² No.2 Bbå°èª¿ Op.31",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ è©¼è«§æ›² No.3 C#å°èª¿ Op.39",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ èˆ¹æ­Œ F#å¤§èª¿ Op.60",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:9},
      {name:"è•­é‚¦ å¹»æƒ³æ³¢è˜­èˆæ›² Abå¤§èª¿ Op.61",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:10},
      {name:"è•­é‚¦ å³èˆˆæ›² No.1 Abå¤§èª¿ Op.29",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:7},
      {name:"è•­é‚¦ å¹»æƒ³å³èˆˆæ›² C#å°èª¿ Op.66",composer:"è•­é‚¦",category:"æµªæ¼«",difficulty:8},
      {name:"èˆ’æ›¼ å…’æ™‚æƒ…æ™¯ Op.15",composer:"èˆ’æ›¼",category:"æµªæ¼«",difficulty:6},
      {name:"èˆ’æ›¼ å¤¢å¹»æ›²",composer:"èˆ’æ›¼",category:"æµªæ¼«",difficulty:5},
      {name:"èˆ’æ›¼ ç‹‚æ­¡ç¯€ Op.9",composer:"èˆ’æ›¼",category:"æµªæ¼«",difficulty:8},
      {name:"èˆ’æ›¼ å¹»æƒ³æ›² Cå¤§èª¿ Op.17",composer:"èˆ’æ›¼",category:"æµªæ¼«",difficulty:9},
      {name:"èˆ’æ›¼ å…‹èŠæ–¯å‹’é­‚ Op.16",composer:"èˆ’æ›¼",category:"æµªæ¼«",difficulty:9},
      {name:"èˆ’æ›¼ äº¤éŸ¿ç·´ç¿’æ›² Op.13",composer:"èˆ’æ›¼",category:"æµªæ¼«",difficulty:9},
      {name:"ææ–¯ç‰¹ æ—…éŠæ­²æœˆç¬¬äºŒå¹´ ä½†ä¸è®€å¾Œæ„Ÿ",composer:"ææ–¯ç‰¹",category:"æµªæ¼«",difficulty:9},
      {name:"ææ–¯ç‰¹ æ—…éŠæ­²æœˆç¬¬ä¸€å¹´ æ—¥å…§ç“¦ä¹‹é˜",composer:"ææ–¯ç‰¹",category:"æµªæ¼«",difficulty:8},
      {name:"ææ–¯ç‰¹ å®‰æ…°æ›² No.3 Dbå¤§èª¿",composer:"ææ–¯ç‰¹",category:"æµªæ¼«",difficulty:6},
      {name:"ææ–¯ç‰¹ æ„›ä¹‹å¤¢ No.3 Abå¤§èª¿",composer:"ææ–¯ç‰¹",category:"æµªæ¼«",difficulty:7},
      {name:"ææ–¯ç‰¹ åŒˆç‰™åˆ©ç‹‚æƒ³æ›² No.2",composer:"ææ–¯ç‰¹",category:"æµªæ¼«",difficulty:9},
      {name:"ææ–¯ç‰¹ åŒˆç‰™åˆ©ç‹‚æƒ³æ›² No.6",composer:"ææ–¯ç‰¹",category:"æµªæ¼«",difficulty:9},
      {name:"å¸ƒæ‹‰å§†æ–¯ é–“å¥æ›² Op.118 No.2 Aå¤§èª¿",composer:"å¸ƒæ‹‰å§†æ–¯",category:"æµªæ¼«",difficulty:7},
      {name:"å¸ƒæ‹‰å§†æ–¯ é–“å¥æ›² Op.117 No.1 Ebå¤§èª¿",composer:"å¸ƒæ‹‰å§†æ–¯",category:"æµªæ¼«",difficulty:7},
      {name:"å¸ƒæ‹‰å§†æ–¯ ç‹‚æƒ³æ›² Op.79 No.1 Bå°èª¿",composer:"å¸ƒæ‹‰å§†æ–¯",category:"æµªæ¼«",difficulty:8},
      {name:"å¸ƒæ‹‰å§†æ–¯ ç‹‚æƒ³æ›² Op.79 No.2 Gå°èª¿",composer:"å¸ƒæ‹‰å§†æ–¯",category:"æµªæ¼«",difficulty:8},
      {name:"å¸ƒæ‹‰å§†æ–¯ å¸•æ ¼å°¼å°¼ä¸»é¡Œè®Šå¥æ›² Op.35",composer:"å¸ƒæ‹‰å§†æ–¯",category:"æµªæ¼«",difficulty:10},
      {name:"æŸ´å¯å¤«æ–¯åŸº å››å­£ ä¸€æœˆ çˆé‚Š",composer:"æŸ´å¯å¤«æ–¯åŸº",category:"æµªæ¼«",difficulty:5},
      {name:"æŸ´å¯å¤«æ–¯åŸº å››å­£ å…­æœˆ èˆ¹æ­Œ",composer:"æŸ´å¯å¤«æ–¯åŸº",category:"æµªæ¼«",difficulty:6},
      {name:"æŸ´å¯å¤«æ–¯åŸº å››å­£ åæœˆ ç§‹ä¹‹æ­Œ",composer:"æŸ´å¯å¤«æ–¯åŸº",category:"æµªæ¼«",difficulty:6},
      {name:"èˆ’ä¼¯ç‰¹ å³èˆˆæ›² Op.90 No.1 Cå°èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:7},
      {name:"èˆ’ä¼¯ç‰¹ å³èˆˆæ›² Op.90 No.2 Ebå¤§èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:6},
      {name:"èˆ’ä¼¯ç‰¹ å³èˆˆæ›² Op.90 No.3 Gbå¤§èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:7},
      {name:"èˆ’ä¼¯ç‰¹ å³èˆˆæ›² Op.90 No.4 Abå¤§èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:7},
      {name:"èˆ’ä¼¯ç‰¹ æ¨‚èˆˆä¹‹æ™‚ Op.94 No.3 Få°èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:6},
      {name:"èˆ’ä¼¯ç‰¹ å¥é³´æ›² D.664 Aå¤§èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:7},
      {name:"èˆ’ä¼¯ç‰¹ å¥é³´æ›² D.960 Bbå¤§èª¿",composer:"èˆ’ä¼¯ç‰¹",category:"æµªæ¼«",difficulty:9},
      {name:"é˜¿çˆ¾å æ‰€æœ‰å°èª¿ç·´ç¿’æ›² Op.39 äº¤éŸ¿æ›²",composer:"é˜¿çˆ¾å",category:"æµªæ¼«",difficulty:10},
      {name:"é˜¿çˆ¾å å¤§å¥é³´æ›²ã€Œå››å€‹å¹´é½¡ã€Op.33",composer:"é˜¿çˆ¾å",category:"æµªæ¼«",difficulty:10},
      
      // V. å°è±¡æ¨‚æ´¾ï¼ˆ23é¦–ï¼‰
      {name:"å¾·å¸ƒè¥¿ è²åŠ é¦¬æ–¯å…‹çµ„æ›² æœˆå…‰",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:6},
      {name:"å¾·å¸ƒè¥¿ å…’ç«¥å¤©åœ° åšå£«çš„æ¼¸é€²ç·´ç¿’",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:5},
      {name:"å¾·å¸ƒè¥¿ å…’ç«¥å¤©åœ° è±¡çš„æ–ç±ƒæ›²",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:6},
      {name:"å¾·å¸ƒè¥¿ å…’ç«¥å¤©åœ° é›ªèŠ±é£›èˆ",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:6},
      {name:"å¾·å¸ƒè¥¿ å‰å¥æ›²ç¬¬ä¸€å†Š äºéº»è‰²é ­é«®çš„å°‘å¥³",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:5},
      {name:"å¾·å¸ƒè¥¿ å‰å¥æ›²ç¬¬ä¸€å†Š æ²‰æ²’çš„æ•™å ‚",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:8},
      {name:"å¾·å¸ƒè¥¿ å‰å¥æ›²ç¬¬äºŒå†Š ç…™ç«",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:9},
      {name:"å¾·å¸ƒè¥¿ ç‰ˆç•« å¡”",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:8},
      {name:"å¾·å¸ƒè¥¿ ç‰ˆç•« æ ¼æ‹‰ç´é”çš„å¤œæ™š",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:8},
      {name:"å¾·å¸ƒè¥¿ ç‰ˆç•« é›¨ä¸­èŠ±åœ’",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:8},
      {name:"å¾·å¸ƒè¥¿ é˜¿æ‹‰è²æ–¯å…‹ No.1 Eå¤§èª¿",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:6},
      {name:"å¾·å¸ƒè¥¿ å¤¢å¹»æ›²",composer:"å¾·å¸ƒè¥¿",category:"å°è±¡",difficulty:5},
      {name:"æ‹‰å¨çˆ¾ æ°´ä¹‹å¬‰æˆ²",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:8},
      {name:"æ‹‰å¨çˆ¾ å°å¥é³´æ›²",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:7},
      {name:"æ‹‰å¨çˆ¾ é¡å­ å¤œä¹‹è›¾",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:9},
      {name:"æ‹‰å¨çˆ¾ é¡å­ æ‚²é³¥",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:8},
      {name:"æ‹‰å¨çˆ¾ é¡å­ æµ·ä¸Šå­¤èˆŸ",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:9},
      {name:"æ‹‰å¨çˆ¾ å¤œä¹‹åŠ æ–¯å·´ æ°´å¦–",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:10},
      {name:"æ‹‰å¨çˆ¾ å¤œä¹‹åŠ æ–¯å·´ çµåˆ‘å°",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:10},
      {name:"æ‹‰å¨çˆ¾ å¤œä¹‹åŠ æ–¯å·´ å²å¡æ³¢",composer:"æ‹‰å¨çˆ¾",category:"å°è±¡",difficulty:10},
      {name:"æ™®æœ—å…‹ ä¸‰é¦–ç”°åœ’è©©",composer:"æ™®æœ—å…‹",category:"å°è±¡",difficulty:6},
      {name:"è–©æ›¿ å‰è«¾ä½©ç¬¬ No.1",composer:"è–©æ›¿",category:"å°è±¡",difficulty:4},
      {name:"è–©æ›¿ å‰è«¾ä½©ç¬¬ No.3",composer:"è–©æ›¿",category:"å°è±¡",difficulty:4},
      
      // VI. äºŒåä¸–ç´€ï¼ˆ26é¦–ï¼‰
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« å‰å¥æ›² Op.3 No.2 C#å°èª¿",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç¾ä»£",difficulty:8},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« å‰å¥æ›² Op.23 No.5 Gå°èª¿",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç¾ä»£",difficulty:8},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« å‰å¥æ›² Op.32 No.12 G#å°èª¿",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç¾ä»£",difficulty:8},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« å¥é³´æ›² No.2 Bbå°èª¿ Op.36",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"ç¾ä»£",difficulty:9},
      {name:"è•­å£«å¡”é«˜ç¶­å¥‘ å‰å¥æ›²èˆ‡è³¦æ ¼ No.1 Cå¤§èª¿",composer:"è•­å£«å¡”é«˜ç¶­å¥‘",category:"ç¾ä»£",difficulty:7},
      {name:"è•­å£«å¡”é«˜ç¶­å¥‘ å‰å¥æ›²èˆ‡è³¦æ ¼ No.5 Då¤§èª¿",composer:"è•­å£«å¡”é«˜ç¶­å¥‘",category:"ç¾ä»£",difficulty:8},
      {name:"è•­å£«å¡”é«˜ç¶­å¥‘ å‰å¥æ›²èˆ‡è³¦æ ¼ No.24 Då°èª¿",composer:"è•­å£«å¡”é«˜ç¶­å¥‘",category:"ç¾ä»£",difficulty:9},
      {name:"æµ¦ç¾…æŸ¯è²å¤« å¥é³´æ›² No.2 Då°èª¿ Op.14",composer:"æµ¦ç¾…æŸ¯è²å¤«",category:"ç¾ä»£",difficulty:8},
      {name:"æµ¦ç¾…æŸ¯è²å¤« å¥é³´æ›² No.3 Aå°èª¿ Op.28",composer:"æµ¦ç¾…æŸ¯è²å¤«",category:"ç¾ä»£",difficulty:8},
      {name:"æµ¦ç¾…æŸ¯è²å¤« å¥é³´æ›² No.7 Bbå¤§èª¿ Op.83",composer:"æµ¦ç¾…æŸ¯è²å¤«",category:"ç¾ä»£",difficulty:10},
      {name:"æµ¦ç¾…æŸ¯è²å¤« ç¬é–“ Op.22",composer:"æµ¦ç¾…æŸ¯è²å¤«",category:"ç¾ä»£",difficulty:7},
      {name:"å·´çˆ¾æ‰˜å…‹ å°å®‡å®™ç¬¬å…­å†Š",composer:"å·´çˆ¾æ‰˜å…‹",category:"ç¾ä»£",difficulty:6},
      {name:"å·´çˆ¾æ‰˜å…‹ æˆ¶å¤– èˆ‡é¼“å’Œç¬›",composer:"å·´çˆ¾æ‰˜å…‹",category:"ç¾ä»£",difficulty:8},
      {name:"å·´çˆ¾æ‰˜å…‹ å¥é³´æ›² Sz.80",composer:"å·´çˆ¾æ‰˜å…‹",category:"ç¾ä»£",difficulty:9},
      {name:"å¡å·´åˆ—å¤«æ–¯åŸº å¥é³´æ›² No.3 Op.46",composer:"å¡å·´åˆ—å¤«æ–¯åŸº",category:"ç¾ä»£",difficulty:7},
      {name:"å¡å·´åˆ—å¤«æ–¯åŸº 24é¦–å‰å¥æ›² Op.38",composer:"å¡å·´åˆ—å¤«æ–¯åŸº",category:"ç¾ä»£",difficulty:7},
      {name:"å“ˆå¯Ÿéƒ½é‡ è§¸æŠ€æ›²",composer:"å“ˆå¯Ÿéƒ½é‡",category:"ç¾ä»£",difficulty:8},
      {name:"è²åˆ©æ™®ï¼è‘›æ‹‰æ–¯ ç·´ç¿’æ›² No.2",composer:"è²åˆ©æ™®ï¼è‘›æ‹‰æ–¯",category:"ç¾ä»£",difficulty:7},
      {name:"å¡æ™®æ–¯æ±€ å…«é¦–éŸ³æ¨‚æœƒç·´ç¿’æ›² Op.40 å‰å¥æ›²",composer:"å¡æ™®æ–¯æ±€",category:"ç¾ä»£",difficulty:9},
      {name:"å¡æ™®æ–¯æ±€ å¥é³´æ›² No.2 Op.54",composer:"å¡æ™®æ–¯æ±€",category:"ç¾ä»£",difficulty:9},
      {name:"ç¾…æ£®å¸ƒæ‹‰ç‰¹ å¸•æ ¼å°¼å°¼ä¸»é¡Œè®Šå¥æ›²",composer:"ç¾…æ£®å¸ƒæ‹‰ç‰¹",category:"ç¾ä»£",difficulty:9},
      {name:"ç¾…æ£®å¸ƒæ‹‰ç‰¹ å¡é–€å¹»æƒ³æ›²",composer:"ç¾…æ£®å¸ƒæ‹‰ç‰¹",category:"ç¾ä»£",difficulty:9},
      {name:"å–¬æ²»ï¼å…‹å€« å®è§€å®‡å®™",composer:"å–¬æ²»ï¼å…‹å€«",category:"ç¾ä»£",difficulty:9},
      {name:"åˆ©è“‹åº• ç·´ç¿’æ›²ç¬¬ä¸€å†Š ç„¡åº",composer:"åˆ©è“‹åº•",category:"ç¾ä»£",difficulty:10},
      {name:"åˆ©è“‹åº• ç·´ç¿’æ›²ç¬¬ä¸€å†Š è‡ªå‹•æ©Ÿå™¨",composer:"åˆ©è“‹åº•",category:"ç¾ä»£",difficulty:10},
      {name:"å¸•çˆ¾ç‰¹ çµ¦é˜¿éº—å¨œ",composer:"å¸•çˆ¾ç‰¹",category:"ç¾ä»£",difficulty:5},
      
      // VII. å”å¥æ›²ï¼ˆ18é¦–ï¼‰
      {name:"è«æœ­ç‰¹ ç¬¬21è™Ÿå”å¥æ›² K.467",composer:"è«æœ­ç‰¹",category:"å”å¥æ›²",difficulty:9},
      {name:"è«æœ­ç‰¹ ç¬¬23è™Ÿå”å¥æ›² K.488",composer:"è«æœ­ç‰¹",category:"å”å¥æ›²",difficulty:9},
      {name:"è«æœ­ç‰¹ ç¬¬24è™Ÿå”å¥æ›² K.491",composer:"è«æœ­ç‰¹",category:"å”å¥æ›²",difficulty:9},
      {name:"è²å¤šèŠ¬ ç¬¬1è™Ÿå”å¥æ›² Op.15",composer:"è²å¤šèŠ¬",category:"å”å¥æ›²",difficulty:9},
      {name:"è²å¤šèŠ¬ ç¬¬3è™Ÿå”å¥æ›² Op.37",composer:"è²å¤šèŠ¬",category:"å”å¥æ›²",difficulty:9},
      {name:"è²å¤šèŠ¬ ç¬¬4è™Ÿå”å¥æ›² Op.58",composer:"è²å¤šèŠ¬",category:"å”å¥æ›²",difficulty:10},
      {name:"è²å¤šèŠ¬ ç¬¬5è™Ÿå”å¥æ›²ã€Œçš‡å¸ã€Op.73",composer:"è²å¤šèŠ¬",category:"å”å¥æ›²",difficulty:10},
      {name:"è•­é‚¦ ç¬¬1è™Ÿå”å¥æ›² Op.11",composer:"è•­é‚¦",category:"å”å¥æ›²",difficulty:9},
      {name:"è•­é‚¦ ç¬¬2è™Ÿå”å¥æ›² Op.21",composer:"è•­é‚¦",category:"å”å¥æ›²",difficulty:9},
      {name:"èˆ’æ›¼ Aå°èª¿å”å¥æ›² Op.54",composer:"èˆ’æ›¼",category:"å”å¥æ›²",difficulty:9},
      {name:"ææ–¯ç‰¹ ç¬¬1è™Ÿå”å¥æ›²",composer:"ææ–¯ç‰¹",category:"å”å¥æ›²",difficulty:10},
      {name:"å¸ƒæ‹‰å§†æ–¯ ç¬¬1è™Ÿå”å¥æ›² Op.15",composer:"å¸ƒæ‹‰å§†æ–¯",category:"å”å¥æ›²",difficulty:10},
      {name:"å¸ƒæ‹‰å§†æ–¯ ç¬¬2è™Ÿå”å¥æ›² Op.83",composer:"å¸ƒæ‹‰å§†æ–¯",category:"å”å¥æ›²",difficulty:10},
      {name:"æŸ´å¯å¤«æ–¯åŸº ç¬¬1è™Ÿå”å¥æ›² Op.23",composer:"æŸ´å¯å¤«æ–¯åŸº",category:"å”å¥æ›²",difficulty:10},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« ç¬¬2è™Ÿå”å¥æ›² Op.18",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"å”å¥æ›²",difficulty:10},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« ç¬¬3è™Ÿå”å¥æ›² Op.30",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"å”å¥æ›²",difficulty:10},
      {name:"æµ¦ç¾…æŸ¯è²å¤« ç¬¬3è™Ÿå”å¥æ›² Op.26",composer:"æµ¦ç¾…æŸ¯è²å¤«",category:"å”å¥æ›²",difficulty:10},
      {name:"è‘›åˆ©æ ¼ Aå°èª¿å”å¥æ›² Op.16",composer:"è‘›åˆ©æ ¼",category:"å”å¥æ›²",difficulty:9},
      
      // VIII. é›™é‹¼ç´ï¼ˆ7é¦–ï¼‰
      {name:"è«æœ­ç‰¹ Då¤§èª¿é›™é‹¼ç´å¥é³´æ›² K.448",composer:"è«æœ­ç‰¹",category:"é›™é‹¼ç´",difficulty:8},
      {name:"èˆ’æ›¼ è¡Œå’Œèˆ‡è®Šå¥æ›² Op.46",composer:"èˆ’æ›¼",category:"é›™é‹¼ç´",difficulty:7},
      {name:"å¸ƒæ‹‰å§†æ–¯ æµ·é “ä¸»é¡Œè®Šå¥æ›² Op.56b",composer:"å¸ƒæ‹‰å§†æ–¯",category:"é›™é‹¼ç´",difficulty:8},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« ç¬¬1è™Ÿçµ„æ›² Op.5",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"é›™é‹¼ç´",difficulty:9},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« ç¬¬2è™Ÿçµ„æ›² Op.17",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"é›™é‹¼ç´",difficulty:9},
      {name:"æ‹‰å¨çˆ¾ éµåª½åª½çµ„æ›²ï¼ˆé›™é‹¼ç´ï¼‰",composer:"æ‹‰å¨çˆ¾",category:"é›™é‹¼ç´",difficulty:7},
      {name:"å¾·å¸ƒè¥¿ é»‘èˆ‡ç™½",composer:"å¾·å¸ƒè¥¿",category:"é›™é‹¼ç´",difficulty:8},
      
      // IX. å››æ‰‹è¯å½ˆï¼ˆ11é¦–ï¼‰
      {name:"èˆ’ä¼¯ç‰¹ Få°èª¿å¹»æƒ³æ›² D.940",composer:"èˆ’ä¼¯ç‰¹",category:"å››æ‰‹è¯å½ˆ",difficulty:8},
      {name:"å¸ƒæ‹‰å§†æ–¯ åŒˆç‰™åˆ©èˆæ›²",composer:"å¸ƒæ‹‰å§†æ–¯",category:"å››æ‰‹è¯å½ˆ",difficulty:6},
      {name:"å¾·å¼—æœ­å…‹ æ–¯æ‹‰å¤«èˆæ›²",composer:"å¾·å¼—æœ­å…‹",category:"å››æ‰‹è¯å½ˆ",difficulty:7},
      {name:"æ¯”æ‰ å…’ç«¥éŠæˆ²",composer:"æ¯”æ‰",category:"å››æ‰‹è¯å½ˆ",difficulty:6},
      {name:"ä½›ç‘ æ´‹å¨ƒå¨ƒçµ„æ›² Op.56",composer:"ä½›ç‘",category:"å››æ‰‹è¯å½ˆ",difficulty:6},
      {name:"æ‹‰å¨çˆ¾ éµåª½åª½çµ„æ›²ï¼ˆå››æ‰‹è¯å½ˆåŸç‰ˆï¼‰",composer:"æ‹‰å¨çˆ¾",category:"å››æ‰‹è¯å½ˆ",difficulty:6},
      {name:"æ‹‰èµ«æ›¼å°¼è«¾å¤« å…­é¦–å°å“ Op.11",composer:"æ‹‰èµ«æ›¼å°¼è«¾å¤«",category:"å››æ‰‹è¯å½ˆ",difficulty:7},
      {name:"æŸ´å¯å¤«æ–¯åŸº èƒ¡æ¡ƒé‰—çµ„æ›²",composer:"æŸ´å¯å¤«æ–¯åŸº",category:"å››æ‰‹è¯å½ˆ",difficulty:6},
      {name:"è«æœ­ç‰¹ å››æ‰‹è¯å½ˆå¥é³´æ›² K.381",composer:"è«æœ­ç‰¹",category:"å››æ‰‹è¯å½ˆ",difficulty:6},
      {name:"è«æœ­ç‰¹ å››æ‰‹è¯å½ˆå¥é³´æ›² K.497",composer:"è«æœ­ç‰¹",category:"å››æ‰‹è¯å½ˆ",difficulty:7},
      {name:"è«æœ­ç‰¹ å››æ‰‹è¯å½ˆå¥é³´æ›² K.521",composer:"è«æœ­ç‰¹",category:"å››æ‰‹è¯å½ˆ",difficulty:7}
    ];
    
    const CATEGORIES = [
      {name:"å…¨éƒ¨",icon:"ğŸµ",color:"#64748b"},
      {name:"ç·´ç¿’æ›²",icon:"ğŸ’ª",color:"#f59e0b"},
      {name:"å·´æ´›å…‹",icon:"ğŸ›ï¸",color:"#8b5cf6"},
      {name:"å¤å…¸",icon:"ğŸ­",color:"#06b6d4"},
      {name:"æµªæ¼«",icon:"ğŸŒ¹",color:"#ec4899"},
      {name:"å°è±¡",icon:"ğŸ¨",color:"#10b981"},
      {name:"ç¾ä»£",icon:"ğŸŒ†",color:"#6366f1"},
      {name:"å”å¥æ›²",icon:"ğŸº",color:"#f97316"},
      {name:"å››æ‰‹è¯å½ˆ",icon:"ğŸ‘¥",color:"#a855f7"},
      {name:"é›™é‹¼ç´",icon:"ğŸ¹ğŸ¹",color:"#0ea5e9"},
      {name:"å®¤å…§æ¨‚",icon:"ğŸ»",color:"#84cc16"},
      {name:"å…¶ä»–",icon:"ğŸ¼",color:"#64748b"}
    ];
    
    const STATUS_NAMES = ["å­¸ç¿’ä¸­", "å·²å®Œæˆ", "å·²ç²¾é€š"];
    const STATUS_ICONS = ["ğŸ“–", "âœ“", "â­"];
    
    let currentFilter = "å…¨éƒ¨";
    let searchTerm = "";
    
    // ============================================================
    // STORAGE
    // ============================================================
    
    function saveData() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      } catch (e) {
        console.error('å„²å­˜å¤±æ•—:', e);
        showToast('âš ï¸ å„²å­˜å¤±æ•—ï¼');
      }
    }
    
    function loadData() {
      try {
        const data = localStorage.getItem(STORAGE_KEY);
        if (data) {
          state = JSON.parse(data);
          return true;
        }
      } catch (e) {
        console.error('è¼‰å…¥å¤±æ•—:', e);
      }
      return false;
    }
    
    function uid() {
      return 'piece_' + Date.now() + '_' + Math.random().toString(36).slice(2, 9);
    }
    
    function formatDate(timestamp) {
      const d = new Date(timestamp);
      return d.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit' });
    }
    
    // ============================================================
    // UI HELPERS
    // ============================================================
    
    function showToast(message) {
      const existing = document.querySelector('.toast');
      if (existing) existing.remove();
      
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => toast.remove(), 2500);
    }
    
    function hideAllScreens() {
      document.querySelectorAll('[id$="Screen"]').forEach(el => el.classList.add('hidden'));
    }
    
    function updateStats() {
      document.getElementById('pieceCount').textContent = state.pieces.length;
      document.getElementById('masteredCount').textContent = 
        state.pieces.filter(p => p.status === 2).length;
      
      const totalMinutes = state.logs.reduce((sum, log) => sum + (log.duration || 0), 0);
      document.getElementById('totalHours').textContent = Math.floor(totalMinutes / 60);
    }
    
    // ============================================================
    // NAVIGATION
    // ============================================================
    
    function showWelcome() {
      hideAllScreens();
      document.getElementById('welcomeScreen').classList.remove('hidden');
    }
    
    function showHome() {
      hideAllScreens();
      document.getElementById('homeScreen').classList.remove('hidden');
      document.getElementById('userName').textContent = state.user.name;
      updateStats();
      renderPiecesList();
    }
    
    function showExplore() {
      hideAllScreens();
      document.getElementById('exploreScreen').classList.remove('hidden');
      currentFilter = "å…¨éƒ¨";
      searchTerm = "";
      document.getElementById('searchInput').value = "";
      renderFilterChips();
      renderLibrary();
    }
    
    function showAddCustom() {
      hideAllScreens();
      document.getElementById('addCustomScreen').classList.remove('hidden');
      // Populate category dropdown
      const select = document.getElementById('customCategory');
      select.innerHTML = CATEGORIES.slice(1).map(c => 
        `<option value="${c.name}">${c.icon} ${c.name}</option>`
      ).join('');
      // Reset form
      document.getElementById('customName').value = '';
      document.getElementById('customComposer').value = 'å…¶ä»–';
      document.getElementById('customCategory').selectedIndex = 0;
      document.getElementById('customDifficulty').value = 5;
      document.getElementById('difficultyValue').textContent = 5;
    }
    
    function showDetail(pieceId) {
      const piece = state.pieces.find(p => p.id === pieceId);
      if (!piece) return;
      
      state.currentPiece = piece;
      hideAllScreens();
      document.getElementById('detailScreen').classList.remove('hidden');
      
      document.getElementById('detailTitle').textContent = piece.name;
      document.getElementById('detailComposer').textContent = piece.composer;
      document.getElementById('detailCategory').textContent = piece.category;
      document.getElementById('detailDifficulty').textContent = piece.difficulty + ' / 10';
      document.getElementById('detailDate').textContent = formatDate(piece.addedDate);
      
      // Update status buttons
      for (let i = 0; i < 3; i++) {
        const btn = document.getElementById(`statusBtn${i}`);
        if (i === piece.status) {
          btn.style.opacity = '1';
          btn.style.transform = 'scale(1.05)';
        } else {
          btn.style.opacity = '0.5';
          btn.style.transform = 'scale(1)';
        }
      }
      
      // Clear log form
      document.getElementById('logDuration').value = '';
      document.getElementById('logNotes').value = '';
      
      // Render logs
      renderLogs();
    }
    
    function showSettings() {
      hideAllScreens();
      document.getElementById('settingsScreen').classList.remove('hidden');
      
      document.getElementById('settingsName').textContent = state.user.name;
      document.getElementById('settingsStartDate').textContent = formatDate(state.user.startDate);
      document.getElementById('settingsPieces').textContent = state.pieces.length + ' é¦–';
      document.getElementById('settingsLogs').textContent = state.logs.length + ' ç­†';
      
      const totalMinutes = state.logs.reduce((sum, log) => sum + (log.duration || 0), 0);
      document.getElementById('settingsHours').textContent = Math.floor(totalMinutes / 60) + ' å°æ™‚';
    }
    
    // ============================================================
    // RENDER FUNCTIONS
    // ============================================================
    
    function renderPiecesList() {
      const container = document.getElementById('piecesList');
      
      if (state.pieces.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ¼</div>
            <p class="empty-text">é‚„æ²’æœ‰æ”¶è—ä»»ä½•æ›²ç›®</p>
            <p class="empty-subtext">å¾æ›²åº«æ¢ç´¢ï¼Œæˆ–æ–°å¢è‡ªå·±çš„æ¨‚æ›²ï¼</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = state.pieces.map(piece => `
        <div class="card" onclick="showDetail('${piece.id}')">
          <div class="card-title">${piece.name}</div>
          <div class="card-info">${piece.composer} Â· é›£åº¦ ${piece.difficulty}/10</div>
          <span class="badge badge-${['learning', 'completed', 'mastered'][piece.status]}">
            ${STATUS_ICONS[piece.status]} ${STATUS_NAMES[piece.status]}
          </span>
          ${piece.isCustom ? '<span class="badge badge-custom">è‡ªè¨‚æ›²ç›®</span>' : ''}
        </div>
      `).join('');
    }
    
    function renderFilterChips() {
      const container = document.getElementById('filterChips');
      container.innerHTML = CATEGORIES.map(cat => `
        <div class="chip ${currentFilter === cat.name ? 'active' : ''}" 
          onclick="setFilter('${cat.name}')">
          ${cat.icon} ${cat.name}
        </div>
      `).join('');
    }
    
    function renderLibrary() {
      const container = document.getElementById('libraryList');
      
      let filtered = REPERTOIRE;
      
      // Filter by category
      if (currentFilter !== "å…¨éƒ¨") {
        filtered = filtered.filter(item => item.category === currentFilter);
      }
      
      // Filter by search
      if (searchTerm) {
        const term = searchTerm.toLowerCase();
        filtered = filtered.filter(item =>
          item.name.toLowerCase().includes(term) ||
          item.composer.toLowerCase().includes(term)
        );
      }
      
      document.getElementById('resultCount').textContent = filtered.length;
      
      if (filtered.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ”</div>
            <p class="empty-text">æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„æ›²ç›®</p>
            <p class="empty-subtext">è©¦è©¦å…¶ä»–åˆ†é¡æˆ–æœå°‹é—œéµå­—</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = filtered.map(item => {
        const isCollected = state.pieces.some(p => p.name === item.name && p.composer === item.composer);
        
        return `
          <div class="card" ${isCollected ? '' : `onclick="addFromLibrary('${item.name.replace(/'/g, "\\'")}', '${item.composer}', '${item.category}', ${item.difficulty})"`}>
            <div class="card-title">${item.name}</div>
            <div class="card-info">${item.composer} Â· ${item.category} Â· é›£åº¦ ${item.difficulty}/10</div>
            ${isCollected ? 
              '<span class="badge badge-completed">âœ“ å·²æ”¶è—</span>' : 
              '<span class="badge" style="background: #6366f1; color: #fff;">é»æ“ŠåŠ å…¥</span>'}
          </div>
        `;
      }).join('');
    }
    
    function renderLogs() {
      const container = document.getElementById('logsList');
      const logs = state.logs.filter(log => log.pieceId === state.currentPiece.id);
      
      if (logs.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">ğŸ“</div>
            <p class="empty-text">é‚„æ²’æœ‰ç·´ç¿’è¨˜éŒ„</p>
            <p class="empty-subtext">é–‹å§‹è¨˜éŒ„ä½ çš„ç·´ç¿’å§ï¼</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = logs.map(log => `
        <div class="log-entry">
          <div class="log-header">
            <span class="log-date">${formatDate(log.date)}</span>
            <span class="log-duration">â±ï¸ ${log.duration} åˆ†é˜</span>
          </div>
          ${log.notes ? `<div class="log-notes">${log.notes}</div>` : ''}
        </div>
      `).join('');
    }
    
    // ============================================================
    // ACTIONS
    // ============================================================
    
    function setFilter(category) {
      currentFilter = category;
      renderFilterChips();
      renderLibrary();
    }
    
    function addFromLibrary(name, composer, category, difficulty) {
      const newPiece = {
        id: uid(),
        name: name,
        composer: composer,
        category: category,
        difficulty: difficulty,
        status: 0,
        addedDate: Date.now(),
        isCustom: false
      };
      
      state.pieces.unshift(newPiece);
      saveData();
      renderLibrary();
      showToast('âœ… å·²åŠ å…¥æ”¶è—ï¼š' + name);
    }
    
    function addCustomPiece() {
      const name = document.getElementById('customName').value.trim();
      if (!name) {
        showToast('âš ï¸ è«‹è¼¸å…¥æ›²ç›®åç¨±');
        return;
      }
      
      const newPiece = {
        id: uid(),
        name: name,
        composer: document.getElementById('customComposer').value.trim() || 'å…¶ä»–',
        category: document.getElementById('customCategory').value,
        difficulty: parseInt(document.getElementById('customDifficulty').value),
        status: 0,
        addedDate: Date.now(),
        isCustom: true
      };
      
      state.pieces.unshift(newPiece);
      saveData();
      showToast('âœ… å·²åŠ å…¥æ”¶è—ï¼š' + name);
      showHome();
    }
    
    function updateStatus(newStatus) {
      if (state.currentPiece) {
        state.currentPiece.status = newStatus;
        const piece = state.pieces.find(p => p.id === state.currentPiece.id);
        if (piece) {
          piece.status = newStatus;
          saveData();
          showDetail(state.currentPiece.id);
          showToast('âœ… ç‹€æ…‹å·²æ›´æ–°');
        }
      }
    }
    
    function addLog() {
      const duration = parseInt(document.getElementById('logDuration').value);
      if (!duration || duration < 1) {
        showToast('âš ï¸ è«‹è¼¸å…¥ç·´ç¿’æ™‚é•·');
        return;
      }
      
      const newLog = {
        id: 'log_' + Date.now(),
        pieceId: state.currentPiece.id,
        pieceName: state.currentPiece.name,
        date: Date.now(),
        duration: duration,
        notes: document.getElementById('logNotes').value.trim()
      };
      
      state.logs.unshift(newLog);
      saveData();
      showDetail(state.currentPiece.id);
      showToast('âœ… è¨˜éŒ„å·²å„²å­˜');
    }
    
    function deletePiece() {
      if (!state.currentPiece) return;
      
      if (!confirm('ç¢ºå®šè¦åˆªé™¤ã€Œ' + state.currentPiece.name + 'ã€å—ï¼Ÿ\nç›¸é—œçš„ç·´ç¿’è¨˜éŒ„ä¹Ÿæœƒè¢«åˆªé™¤ã€‚')) {
        return;
      }
      
      state.pieces = state.pieces.filter(p => p.id !== state.currentPiece.id);
      state.logs = state.logs.filter(l => l.pieceId !== state.currentPiece.id);
      saveData();
      showToast('ğŸ—‘ï¸ å·²åˆªé™¤');
      showHome();
    }
    
    // ============================================================
    // EXPORT / IMPORT
    // ============================================================
    
    function exportExcel() {
      try {
        if (typeof XLSX === 'undefined') {
          showToast('âš ï¸ Excel åŠŸèƒ½è¼‰å…¥ä¸­ï¼Œè«‹ç¨å¾Œå†è©¦');
          return;
        }
        
        // Worksheet 1: æ”¶è—æ›²ç›®
        const piecesData = state.pieces.map((piece, index) => ({
          'ç·¨è™Ÿ': index + 1,
          'æ›²ç›®åç¨±': piece.name,
          'ä½œæ›²å®¶': piece.composer,
          'åˆ†é¡': piece.category,
          'é›£åº¦': piece.difficulty,
          'ç‹€æ…‹': STATUS_NAMES[piece.status],
          'åŠ å…¥æ—¥æœŸ': formatDate(piece.addedDate),
          'è‡ªè¨‚æ›²ç›®': piece.isCustom ? 'æ˜¯' : 'å¦'
        }));
        
        const ws1 = XLSX.utils.json_to_sheet(piecesData);
        ws1['!cols'] = [
          {wch: 6}, {wch: 35}, {wch: 15}, {wch: 12}, 
          {wch: 6}, {wch: 10}, {wch: 12}, {wch: 10}
        ];
        
        // Worksheet 2: ç·´ç¿’è¨˜éŒ„
        const logsData = state.logs.map((log, index) => {
          const piece = state.pieces.find(p => p.id === log.pieceId);
          return {
            'ç·¨è™Ÿ': index + 1,
            'æ›²ç›®åç¨±': log.pieceName || (piece ? piece.name : 'å·²åˆªé™¤æ›²ç›®'),
            'ç·´ç¿’æ—¥æœŸ': formatDate(log.date),
            'æ™‚é•·(åˆ†é˜)': log.duration,
            'ç­†è¨˜': log.notes || ''
          };
        });
        
        const ws2 = XLSX.utils.json_to_sheet(logsData);
        ws2['!cols'] = [{wch: 6}, {wch: 35}, {wch: 12}, {wch: 12}, {wch: 50}];
        
        // Worksheet 3: çµ±è¨ˆè³‡æ–™
        const totalMinutes = state.logs.reduce((sum, log) => sum + (log.duration || 0), 0);
        const statsData = [
          { 'é …ç›®': 'ä½¿ç”¨è€…åç¨±', 'æ•¸å€¼': state.user.name },
          { 'é …ç›®': 'é–‹å§‹æ—¥æœŸ', 'æ•¸å€¼': formatDate(state.user.startDate) },
          { 'é …ç›®': 'æ”¶è—æ›²ç›®æ•¸', 'æ•¸å€¼': state.pieces.length },
          { 'é …ç›®': 'å·²ç²¾é€šæ›²ç›®', 'æ•¸å€¼': state.pieces.filter(p => p.status === 2).length },
          { 'é …ç›®': 'ç·´ç¿’è¨˜éŒ„æ•¸', 'æ•¸å€¼': state.logs.length },
          { 'é …ç›®': 'ç¸½ç·´ç¿’æ™‚æ•¸', 'æ•¸å€¼': Math.floor(totalMinutes / 60) + ' å°æ™‚ ' + (totalMinutes % 60) + ' åˆ†é˜' },
          { 'é …ç›®': 'åŒ¯å‡ºæ—¥æœŸ', 'æ•¸å€¼': formatDate(Date.now()) }
        ];
        
        const ws3 = XLSX.utils.json_to_sheet(statsData);
        ws3['!cols'] = [{wch: 15}, {wch: 40}];
        
        // Create workbook
        const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws1, "æ”¶è—æ›²ç›®");
        XLSX.utils.book_append_sheet(wb, ws2, "ç·´ç¿’è¨˜éŒ„");
        XLSX.utils.book_append_sheet(wb, ws3, "çµ±è¨ˆè³‡æ–™");
        
        // Download
        const filename = `KeyJourney_${state.user.name}_${formatDate(Date.now()).replace(/\//g, '')}.xlsx`;
        XLSX.writeFile(wb, filename);
        
        showToast('ğŸ“Š Excel æª”æ¡ˆå·²ä¸‹è¼‰ï¼');
      } catch (e) {
        console.error('åŒ¯å‡º Excel å¤±æ•—:', e);
        showToast('âš ï¸ åŒ¯å‡ºå¤±æ•—ï¼š' + e.message);
      }
    }
    
    function exportJSON() {
      try {
        const dataStr = JSON.stringify(state, null, 2);
        const dataBlob = new Blob([dataStr], {type: 'application/json'});
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `KeyJourney_å‚™ä»½_${formatDate(Date.now()).replace(/\//g, '')}.json`;
        link.click();
        URL.revokeObjectURL(url);
        
        showToast('ğŸ“¥ JSON å‚™ä»½å·²ä¸‹è¼‰ï¼');
      } catch (e) {
        console.error('åŒ¯å‡º JSON å¤±æ•—:', e);
        showToast('âš ï¸ åŒ¯å‡ºå¤±æ•—');
      }
    }
    
    function importJSON(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const imported = JSON.parse(e.target.result);
          
          // Validate
          if (!imported.user || !imported.pieces || !imported.logs) {
            showToast('âš ï¸ æª”æ¡ˆæ ¼å¼éŒ¯èª¤');
            return;
          }
          
          // Confirm
          const msg = `ç¢ºå®šè¦åŒ¯å…¥å‚™ä»½å—ï¼Ÿ\n\nå‚™ä»½è³‡æ–™ï¼š\nä½¿ç”¨è€…ï¼š${imported.user.name}\næ›²ç›®ï¼š${imported.pieces.length} é¦–\nè¨˜éŒ„ï¼š${imported.logs.length} ç­†\n\nâš ï¸ ç›®å‰çš„è³‡æ–™å°‡è¢«è¦†è“‹ï¼`;
          
          if (confirm(msg)) {
            state = imported;
            saveData();
            showToast('âœ… åŒ¯å…¥æˆåŠŸï¼');
            showHome();
          }
        } catch (e) {
          console.error('åŒ¯å…¥å¤±æ•—:', e);
          showToast('âš ï¸ åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼éŒ¯èª¤');
        }
      };
      reader.readAsText(file);
      
      // Reset input
      event.target.value = '';
    }
    
    function clearData() {
      const msg = 'âš ï¸ ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è³‡æ–™å—ï¼Ÿ\n\né€™å€‹å‹•ä½œç„¡æ³•å¾©åŸï¼\nå»ºè­°å…ˆåŒ¯å‡ºå‚™ä»½ã€‚';
      
      if (confirm(msg)) {
        if (confirm('çœŸçš„ç¢ºå®šå—ï¼Ÿæ‰€æœ‰æ›²ç›®å’Œç·´ç¿’è¨˜éŒ„éƒ½æœƒè¢«åˆªé™¤ï¼')) {
          localStorage.removeItem(STORAGE_KEY);
          location.reload();
        }
      }
    }
    
    // ============================================================
    // EVENT LISTENERS
    // ============================================================
    
    document.getElementById('nameInput').addEventListener('input', (e) => {
      document.getElementById('startBtn').disabled = !e.target.value.trim();
    });
    
    document.getElementById('nameInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && e.target.value.trim()) {
        document.getElementById('startBtn').click();
      }
    });
    
    document.getElementById('startBtn').addEventListener('click', () => {
      const name = document.getElementById('nameInput').value.trim();
      if (name) {
        state.user = { name: name, startDate: Date.now() };
        state.pieces = [];
        state.logs = [];
        saveData();
        showHome();
        showToast('æ­¡è¿ä¾†åˆ° Key Journeyï¼ğŸ¹');
      }
    });
    
    document.getElementById('searchInput').addEventListener('input', (e) => {
      searchTerm = e.target.value;
      renderLibrary();
    });
    
    // ============================================================
    // INITIALIZATION
    // ============================================================
    
    console.log('ğŸ¹ Key Journey å®Œæ•´ç‰ˆå•Ÿå‹•ä¸­...');
    
    if (loadData() && state.user) {
      console.log('âœ… è¼‰å…¥ç¾æœ‰è³‡æ–™');
      console.log('æ›²ç›®æ•¸ï¼š', state.pieces.length);
      console.log('è¨˜éŒ„æ•¸ï¼š', state.logs.length);
      showHome();
    } else {
      console.log('âœ… é¡¯ç¤ºæ­¡è¿ç•«é¢');
      showWelcome();
    }
    
    console.log('ğŸ‰ ç³»çµ±å°±ç·’ï¼å®Œæ•´åŠŸèƒ½ç‰ˆæœ¬');
    console.log('ğŸ“š æ›²ç›®åº«ï¼š', REPERTOIRE.length, 'é¦–');
  </script>
</body>
</html>
